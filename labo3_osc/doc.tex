\documentclass[12pt,a4paper]{article}

\usepackage[left=3cm, right=3cm, top=2.5cm, bottom=2.5cm]{geometry}
\usepackage{setspace}
\usepackage{amsmath}
\usepackage{tikz}
\usepackage{pgfplotstable}
\usepackage{titlesec}
\usepackage{bm}
\usepackage{tcolorbox}
\tcbuselibrary{skins}
\usepackage{empheq}
\usepackage{booktabs}
\usepackage{caption}
\usepackage{hyperref}
\usepackage{fancyhdr}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=cyan,
    pdfpagemode=FullScreen,
    }
\usepackage{graphicx}
\graphicspath{ {./images/} }


\titleformat{\section}{\Large\bfseries}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries}{\thesubsection}{1em}{}


\renewcommand{\contentsname}{Table des Matières}
\renewcommand{\tablename}{Tableau }
%\renewcommand{\baselinestretch}{1.5}

\title{#Titlu#}
\author{Liviu Arsenescu, Cătălin Bozan}
\date{date}

\newtcbox{\mymath}[1][]{%
    nobeforeafter,
    math upper,
    tcbox raise base,
    enhanced,
    colframe=black,
    colback=white,
    boxrule=1pt,
    drop shadow={
        shadow xshift=3pt,
        shadow yshift=-3pt,
        opacity=1
    },
    #1
}

\pagestyle{fancy}
\fancyhf{}
\rhead{\includegraphics[width=4cm]{hearclogo.png}}
\lhead{\thepage}
\setlength{\headsep}{30pt}

\begin{document}
    \pagenumbering{gobble}
    \begin{titlepage}
        \begin{center}
            \vspace*{\fill}
            \Huge \textbf{#Titlu#} \\
            \Huge \textbf{#Subtitlu#} \\
            \Large Rapport du Laboratoire \\
            \begin{figure}[h]
                \centering
                \includegraphics[width=7cm]{hearclogo.png}
            \end{figure}
            \vspace{\fill}
            \Large Liviu Arsenescu, Cătălin Bozan \\
            09.04.2024

            \vspace*{\fill}
        \end{center}
    \end{titlepage}

    \thispagestyle{empty}
    \tableofcontents
    \newpage

    \pagenumbering{arabic}
    \section{Description de l'expérience}
    \subsection{Buts}
    \begin{itemize}
        \item 
    \end{itemize}

    \subsection{Éléments théoriques}
    \subsubsection{Les différentes grandeurs physiques rencontrées}
    \begin{minipage}{0.6\linewidth}
        \begin{itemize}
            \item \textbf{ceva} - descriere
        \end{itemize}
    \end{minipage}%
    \hfill
    \begin{minipage}{0.4\linewidth}
        \begin{itemize}
            \item[-] $\bm{[ceva]=unitate}$
        \end{itemize}   
    \end{minipage}

    \subsection{Principe de l'expérience}
    L'expérience consiste en ces deux parties :
    \begin{enumerate}
        \item Avant de procéder à l'expérience proprement dite, on calcule à l'aide du poids et de la corde la masse linéique, qu'on utilise pour calculer une vitesse $v_{calc}$.
        \item On calcule les paires de (n, f$_n$) pour les douze premières harmoniques, qu'on utilise pour obtenir une vitesse $v_{exp}$.
    \end{enumerate}

    \subsection{Schéma et montage de l’expérience}
    \subsection{Déroulement de l'expérience}
    \subsubsection{Les mesures préalables}
    \begin{itemize}
        \item On prend une balance et on mesure la masse totale de la corde.
        \item On établit une longueur étalon, qui servira à calculer le coefficient d'allongement de la corde.
        \item Avec cette longueur initiale, on calcule la longueur de la corde après avoir attaché le même poids que on utilise plus tard pour mettre en place l'expérience.
    \end{itemize}
    \subsubsection{Le calcul des harmoniques}
    \begin{itemize}
        \item On met l'agitateur sur une tige fixée à la table de travail.
        \item En prenant une distance considérable, on met une poulie de la même manière.
        \item On attache et on place la corde entre l'agitateur et la poulie, et on la tend à l'aide d'un poids à l'extrémité libre.
        \item On mesure la distance résultante entre l'extrémité de l'agitateur et la poulie.
        \item On connecte l'agitateur à un générateur de courant alternatif réglable.
        \item En ajustant la fréquence et la tension (amplitude) du générateur, on génère les douze premières harmoniques du notre système.
    \end{itemize}
    \section{Mesures}
    \subsection{Pour le calcul de la vitesse avec la masse linéique}
    \subsubsection{Mesures constantes :}
    \subsubsection{Tableau des mesures :}

    \begin{table}[htbp]
        \centering
        \begin{tabular}{c|c}
            \toprule
            n & f$_n$ (Hz) \\
            \midrule
            1  & 6.37  \\
            2  & 13.18 \\
            3  & 19.68 \\
            4  & 26.21 \\
            5  & 32.51 \\
            6  & 39.51 \\
            7  & 45.71 \\
            8  & 52.81 \\
            9  & 59.21 \\
            10 & 65.71 \\
            11 & 72.51 \\
            12 & 78.71 \\
            \bottomrule
        \end{tabular}
        \caption{Les douze premières harmoniques}
    \end{table}

    \subsection{Pour le calcul de la vitesse avec les harmoniques}
    \section{Analyse des mesures et résultats}
    \subsection{Vitesse avec la masse linéique}
    \subsection{Vitesse avec les harmoniques}
    
    \pgfplotstableread[col sep=comma]{data/exp_data.csv}\expIdata
    \begin{tikzpicture}[scale=1]
        % Scatter plot
        \begin{axis}[
            xlabel={n},
            ylabel={f$_n$ (Hz)},
            legend pos=north east,
            legend style={at={(0.30,0.75)}, anchor=south},
            grid=both,
            width=1\textwidth,
            height=0.3\textheight,
            x tick label style={
                /pgf/number format/.cd,
                precision=0,
                fixed,
                fixed zerofill,
            },
            y tick label style={
                /pgf/number format/.cd,
                precision=2,
                fixed,
                fixed zerofill,
            },
            xmin=0,
            xmax=13,
            ymin=4,
            ymax=81,
        ]
            \addplot+[only marks, mark=x, error bars/.cd, x dir=both, x explicit, y dir=both, y explicit] table[x=n, x error=err_g, y=fn, y error=err_fn] {\expIdata};

            % Linear regression line
            \addplot [red, thick] table[
                y={create col/linear regression={y=fn}}
            ] {\expIdata};
            \xdef\slope{\pgfplotstableregressiona}
            \xdef\intercept{\pgfplotstableregressionb}

            % Add the equation of the line
            \addlegendentry{Données}
            \addlegendentry{Régr. Lin.: $y = \pgfmathprintnumber{\slope}x + \pgfmathprintnumber{\intercept}$}
        \end{axis}
    \end{tikzpicture}

    \subsection{Choix et calcul d'incertitudes}
    \subsubsection{Choix des incertitude :}
    \subsubsection{Calcul d'incertitudes}
    \subsection{Discussion des résultats :}
    \section{Synthèse et conclusion}
\end{document}

